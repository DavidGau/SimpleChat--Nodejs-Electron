<!DOCTYPE html>
<html>
<head>
	<title>Simple Chat | Connexion</title>
	<meta charset="utf-8"/>
</head>
<body>
	<form>
		<input type="text" id="name" placeholder="Pseudo"/>
		<input type="password" id="password" placeholder="Password"/>
		<input type="submit" id="submit"/>
	</form>

	<a href="./enregistrement.html" title="Enregistrement">Vers la page enregistrement</a>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.dev.js"></script>
	<script>
		let socket = io.connect("http://localhost:3000/connection");
		let submit = document.getElementById("submit");
		let name = document.getElementById("name");
		let password = document.getElementById("password");

		submit.addEventListener("click",function(e){
			e.preventDefault();

			socket.emit("connection",name.value,password.value);

		});


		socket.on("answer",function(answer){

			if(answer){
				sessionStorage.setItem("key",answer);
				document.location.href = "lobby_list.html";
			}
			else{
				console.log("Connection failed");
			}
		});
	</script>
</body>
</html>